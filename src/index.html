<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>ApotifyAPIJs</title>
    <base href="/" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <!-- <script
      src="https://sdk.scdn.co/spotify-player.js"
      async
      onload="func1()"
    ></script>

    <script type="text/javascript">
      var onSpotifyWebPlaybackSDKReady = function () {
        const token =
          "BQDJrRGyM5IrGObtB25m8gvw1mzcolhpkFmvWvMl0jdbeWZMcLuZHyhwl5olWpjrhPholCgiwc_z6ItvMkdJOOMQpIuA69LVC6viiuu7puKRGMDedvegA8WdAFBkEbMyEjXA7CGeaLtm86i1VmMKZDYCdXMhBeeOIT_LEyjLxYWRJPAtBH51rfriPDhRT35ITSoGgtJ0yk056focRzHqji0v9FdZSffDTkKQ2zH3rZH6V-NGrXo-YLyNF2Sruzb5pPn_AvnlqJhI1ShiwwsjpoC6gZ53cUVIQ0eYCSnzn1LmpcHHD1RN7D3K_UCexr5LG2Vo7wFcW7y71rQa8A";
        const player = new Spotify.Player({
          name: "Web Playback SDK Quick Start Player",
          getOAuthToken: (cb) => {
            cb(token);
          },
        });
        player.addListener("ready", ({ device_id }) => {
          console.log("Ready with Device ID", device_id);
        });

        player.addListener("not_ready", ({ device_id }) => {
          console.log("Device ID has gone offline", device_id);
        });
        player.connect();
      };
      var func1 = function () {
        debugger
        const play = ({
          spotify_uri,
          playerInstance: {
            _options: { getOAuthToken },
          },
        }) => {
          getOAuthToken((access_token) => {
            fetch(`https://api.spotify.com/v1/me/player/play?device_id=${id}`, {
              method: "PUT",
              body: JSON.stringify({ uris: [spotify_uri] }),
              headers: {
                "Content-Type": "application/json",
                Authorization: `Bearer ${access_token}`,
              },
            });
          });
        };

        play({
          playerInstance: new Spotify.Player({ name: "MyPlayer" }),
          spotify_uri: "spotify:track:7xGfFoTpQ2E7fRF5lN10tr",
        });
      };
    </script> -->
  </head>
  <body>
    <app-root></app-root>
    <div id="amazon-root"></div>
    <a id="Logout">Logout</a>
    <script type="text/javascript">
      document.getElementById("Logout").onclick = function () {
        amazon.Login.logout();
      };
    </script>
    <script type="text/javascript">
      window.onAmazonLoginReady = function () {
        amazon.Login.setClientId(
          "amzn1.application-oa2-client.7d1fab614479493aa3af49ecba48ef73"
        );
      };
      (function (d) {
        var a = d.createElement("script");
        a.type = "text/javascript";
        a.async = true;
        a.id = "amazon-login-sdk";
        a.src = "https://assets.loginwithamazon.com/sdk/na/login1.js";
        d.getElementById("amazon-root").appendChild(a);
      })(document);
    </script>
    <a href id="LoginWithAmazon">
      <img
        border="0"
        alt="Login with Amazon"
        src="https://images-na.ssl-images-amazon.com/images/G/01/lwa/btnLWA_gold_156x32.png"
        width="156"
        height="32"
      />
    </a>
    <script type="text/javascript">
      document.getElementById("LoginWithAmazon").onclick = function () {
        options = {};
        options.scope = "profile amazon_music:access";
        options.pkce = true;
        options.scope_data = {
          profile: { essential: false },
          "amazon_music:access": { essential: false },
        };
        // amazon.Login.authorize(
        //   options,
        //   "https://anujsharma-bbd.github.io/Apotify-API-js/"
        // );
        amazon.Login.authorize(options, function (response) {
          if (response.error) {
            console.log("oauth error " + response.error);
            return;
          }
          amazon.Login.retrieveToken(response.code, function (response) {
            if (response.error) {
              console.log("oauth error " + response.error);
              return;
            }
            console.log("Access Token: " + response.access_token);
            amazon.Login.retrieveProfile(
              response.access_token,
              function (response) {
                console.log("Hello, " + response.profile.Name);
                console.log(
                  "Your e-mail address is " + response.profile.PrimaryEmail
                );
                console.log("Your unique ID is " + response.profile.CustomerId);
                if (window.console && window.console.log)
                  window.console.log(response);
              }
            );
          });
        });
        return false;
      };
    </script>
  </body>
</html>
